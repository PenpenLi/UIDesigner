---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guoyu.
--- DateTime: 2019/2/27 11:38
---
local BattleSkillEffectOnceView=require("GameLogic.BattleNew.View.Object.BattleSkillEffectOnceView")
local BattleSkillEffectViewBase=require("GameLogic.BattleNew.View.Object.BattleSkillEffectViewBase")
local BattleSkillYJEffectView=require("GameLogic.BattleNew.View.Object.BattleSkillYJEffectView")
local BattleSkillEffectViewFactory=BaseClass("BattleSkillEffectViewFactory")


--创建技能效果显示静态方法
local function CreateBattleSkillEffectView(effectId,owner,fxConfig,fxId,effectLayer,hide)
    if fxConfig.FxType==1 then--单个类型
        local temp = nil
        if fxConfig.Circle==1 then--播放一次
             temp = BattleSkillEffectOnceView.New()
        elseif fxConfig.Circle==2 then--持续播放
            temp=BattleSkillEffectViewBase.New()
        elseif fxConfig.Circle == 0 then
            temp = BattleSkillEffectOnceView.New()
        end
        GameObjectPool:GetInstance():GetGameObjectAsync(fxConfig.prefab_Name,function(chara)
            if not IsNull(chara) then
                temp:OnInit(fxId,fxConfig,chara.gameObject,owner,effectId)
                if hide or owner.battlePosition == BattleEnum.BattlePosition.BACK then
                    temp:ShowAndHideEffect(false)
                end
            end
        end)
        if fxConfig.Circle == 2 then
            return temp
        else
            temp:AddUpdate()
        end
    elseif fxConfig.FxType==2 then--印记类型
        if not effectLayer or effectLayer == 0 then
            return nil
        end
        local temp = BattleSkillYJEffectView.New()
        GameObjectPool:GetInstance():GetGameObjectAsync("Art/EffectRes/Common/fx_yingji_parent.prefab",function(chara)
            if not IsNull(chara) then
                temp:OnInit(fxId,fxConfig,chara.gameObject,owner,effectId,effectLayer)
                if owner.battlePosition == BattleEnum.BattlePosition.BACK then
                    temp:ShowAndHideEffect(false)
                end
            end
        end)
        return temp
    end
    return nil
end
BattleSkillEffectViewFactory.CreateBattleSkillEffectView=CreateBattleSkillEffectView

return BattleSkillEffectViewFactory