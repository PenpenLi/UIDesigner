---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/4/17 11:40
local HorseData = BaseClass("HorseData", Singleton)
local function __init(self)

    --初始化
    --频道1
    self.channel_one={}
    --table.insert(self.channel_one,"--------欢迎来到镇魂街--------")
    --table.insert(self.channel_one,"-----30分钟后版本进行更新，30分钟后版本进行更新--30分钟后版本进行更新30分钟后版本进行更新30分钟后版本进行更新，30分钟后版本进行更新-----")
    --table.insert(self.channel_one,"玩家 一不小心 成功获得SSR 卡牌 武圣关羽 祝----")
end

local function UpDataInfo(self,info,time)
--更新消息
    table.insert(self.channel_one,{content = info,time = time})
    self:OpenOrRefreshUIHorse()
end

local function PriorityPlayInfo(self,info,time)
    table.insert(self.channel_one,1,{content = info,time = time})
    self:OpenOrRefreshUIHorse()
end

local function OpenOrRefreshUIHorse(self)
    if UIManager:GetInstance():GetWindow(UIWindowNames.UIHorseLamp,true,true) == nil then
        if #self.channel_one > 0 then
            UIManager:GetInstance():OpenWindow(UIWindowNames.UIHorseLamp,self.channel_one[1])
            table.remove(self.channel_one,1)
        end
    end
end

local function CheckNewHorseData(self)
    if #self.channel_one > 0 then
        DataManager:GetInstance():Broadcast(DataMessageNames.ON_HORSE_LAMP_UPDATE,self.channel_one[1])
        table.remove(self.channel_one,1)
    else
        UIManager:GetInstance():CloseWindow(UIWindowNames.UIHorseLamp)
    end
end
HorseData.CheckNewHorseData = CheckNewHorseData
HorseData.OpenOrRefreshUIHorse = OpenOrRefreshUIHorse
HorseData.UpDataInfo = UpDataInfo
HorseData.PriorityPlayInfo = PriorityPlayInfo
HorseData.__init = __init
return HorseData