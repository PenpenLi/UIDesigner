---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/4/18 17:4
local GiftData = BaseClass("GiftData", Singleton)
local function __init(self)

    --self:RequestGiftData()
end
local function RequestGiftData(self)
    local msdId = MsgIDDefine.PBMISSION_GET_NEW_PERSON_INFO_REQUEST
    NetManager:GetInstance():SendMessage(msdId,nil,function(msg_obj)
        if msg_obj.OpCode ~= 0 then
            Logger.Log("OnRecvPveStart出错了~")
            UISpecial:GetInstance():UITipText(msg_obj.Packages.msg)
            return
        end
        --msg_obj.Packages.show=7
        self:GetGiftDataState(msg_obj.Packages.show)
        SevenGiftData:GetInstance():RequestSevenGiftData(msg_obj,self.SevenGiftDataIsNull)
        OnlineGiftData:GetInstance():RequestOnlineGiftData(msg_obj,self.OnlineGiftDataIsNull)
        LevelGiftData:GetInstance():RequestLevelGiftData(msg_obj,self.LevelGiftDataIsNull)
    end)
end
local function GetGiftDataState(self,Num)
    --111 001   101   010 000
    --等级 1   在线 2    7日  4
    local rel= DataUtil.tobinary(Num)
    if string.len(rel)==2 then
        rel= "0"..rel
    elseif string.len(rel)==1 then
        rel= "00"..rel
    end
    for i = 1, 3 do
        local info= string.sub(rel,i,i)
        if i==1   then
            self.SevenGiftDataIsNull=(info=="0")
        elseif i==2 then
            self.OnlineGiftDataIsNull=(info=="0")
        elseif i==3  then
            self.LevelGiftDataIsNull=(info=="0")
        end
    end
end



GiftData.__init = __init
GiftData.RequestGiftData=RequestGiftData
GiftData.GetGiftDataState = GetGiftDataState
return GiftData