---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guoyu.
--- DateTime: 2019/5/11 16:09
---
local UIDrag= BaseClass("UIDrag", UIBaseContainer)
local base=UIBaseContainer
-- 创建
local function OnCreate(self, relative_path)
    base.OnCreate(self)
    -- Unity侧原生组件
    self.unity_uiDrag = UIUtil.FindDrag(self.transform, relative_path)
    -- 记录事件回调
    self.__onBeginDrag = nil
    self._onDrag=nil
    self._onEndDrag=nil

end


local function SetOnBeginDrag(self,...)
    self.__onBeginDrag = BindCallback(...)
    self.unity_uiDrag.OnBeginDragEvent=self.__onBeginDrag
end

local function SetOnDrag(self,...)
    self._onDrag=BindCallback(...)
    self.unity_uiDrag.OnDragEvent=self._onDrag
end

local function SetOnEndDrag(self,...)
    self._onEndDrag=BindCallback(...)
    self.unity_uiDrag.OnEndDragEvent=self._onEndDrag
end

local function isDrag(self)

    return self.unity_uiDrag:GetIsDrag()
end


-- 资源释放
local function OnDestroy(self)
    if self.__onBeginDrag~=nil then
        self.unity_uiDrag.OnBeginDragEvent=nil
    end
    if self._onDrag~=nil then
        self.unity_uiDrag.OnDragEvent=nil
    end

    if self._onEndDrag~=nil then
        self.unity_uiDrag.OnEndDragEvent=nil
    end

    self.unity_uiDrag =nil
    -- 记录事件回调
    self.__onBeginDrag = nil
    self._onDrag=nil
    self._onEndDrag=nil
    base.OnDestroy(self)
end

UIDrag.OnCreate=OnCreate
UIDrag.OnDestroy=OnDestroy
UIDrag.SetOnBeginDrag=SetOnBeginDrag
UIDrag.SetOnDrag=SetOnDrag
UIDrag.SetOnEndDrag=SetOnEndDrag
UIDrag.isDrag=isDrag
return UIDrag