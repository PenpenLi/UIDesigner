---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ljl.
--- DateTime: 2019/7/8 15:29
---
local UICardRelation = BaseClass("UICardRelation", UIBaseContainer)
local base = UIBaseContainer
local UICardRelationItem = require "UI.UICardList.Component.card_property.UICardRelationItem"


local function OnCreate(self,parent)
    base.OnCreate(self)
    self.parent=parent
    self.grid = self:AddComponent(UIWrapGroup3D, "relationBg/Scroll View/GameObject",UICardRelationItem ,self)
    self.active_num = self:AddComponent(UIText,"relationBg/Image (4)/activeText")

end

local function OnRefresh(self,_cardData)
    self.card_name=_cardData.name
    self.active_num:SetText(CardData:GetInstance().cardActiveInfo)
    local relationData = CardData:GetInstance():GetRelationDataForCardId(_cardData.id)
    if relationData ~= nil and #relationData > 0 then
        self.grid:SetLength(table.count(relationData))
        self.grid:SetGridPositionByIndex(0)
    else
        self.grid:SetLength(0)
    end

end

local  function OnDisable(self)

end
local function OnDestroy(self)
    --主界面DesTory 触发

end
UICardRelation.OnDestroy= OnDestroy
UICardRelation.OnDisable= OnDisable
UICardRelation.OnRefresh = OnRefresh
UICardRelation.OnCreate = OnCreate

return UICardRelation