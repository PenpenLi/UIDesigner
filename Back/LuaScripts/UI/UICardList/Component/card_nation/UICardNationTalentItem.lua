---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by aaa.
--- DateTime: 2019/5/6 20:56
---
local UICardNationTalentItem = BaseClass("UICardNationTalentItem", UIWrapComponent)
local base = UIWrapComponent

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    -- 组件初始化

    --基础
    self.blueBg1 = self:AddComponent(UIImage, "talent/BlueBg1")
    self.blueBg2 = self:AddComponent(UIImage, "talent/BlueBg2")
    self.iconBg = self:AddComponent(UIImage, "talent/IconBg")
    self.icon = self:AddComponent(UIImage, "talent/IconBg/Icon", AtlasConfig.DynamicTex)

    self.nameText = self:AddComponent(UIText, "talent/Name")
    self.levelText = self:AddComponent(UIText, "talent/Level")
    self.lockObj = UIUtil.FindTrans(self.transform, "talent/Lock").gameObject
    self.unlockConditionText = self:AddComponent(UIText, "talent/Lock/UnlockCondition")

    --当前等级效果
    self.curLevelObj = UIUtil.FindTrans(self.transform, "curLevel").gameObject
    self.curLevelDes = self:AddComponent(UIText, "curLevel/curLevelDes")

    --下一级等级效果
    self.nextLevelObj = UIUtil.FindTrans(self.transform, "nextLevel").gameObject
    self.nextLevelDes = self:AddComponent(UIText, "nextLevel/NextLevelDes")

    self.grayMat = self.blueBg1:GetMat()
end

local function OnRefresh(self, itemData)
    if itemData == nil then
        return
    end

    self.icon:SetSpriteName(itemData.icon)
    self.nameText:SetText(itemData.name)
    self.levelText:SetText(itemData.level)

    if itemData.isLock then
        self:IsLocked(true)
        self.lockObj:SetActive(true)
        self.curLevelObj:SetActive(false)
        self.nextLevelObj:SetActive(false)
        self.unlockConditionText:SetText(itemData.unLockStr)
    else
        self:IsLocked(false)
        self.lockObj:SetActive(false)
        self.curLevelObj:SetActive(true)
        self.nextLevelObj:SetActive(true)

        self.curLevelDes:SetText(itemData.curLevelDes)
        self.nextLevelDes:SetText(itemData.nextLevelDes)
    end
end

local function IsLocked(self, lock)
    local grayMat = lock and self.grayMat or nil
    self.blueBg1:SetMat(grayMat)
    self.blueBg2:SetMat(grayMat)
    self.iconBg:SetMat(grayMat)
    self.icon:SetMat(grayMat)
end

UICardNationTalentItem.OnCreate = OnCreate
UICardNationTalentItem.OnRefresh = OnRefresh
UICardNationTalentItem.IsLocked = IsLocked
return UICardNationTalentItem