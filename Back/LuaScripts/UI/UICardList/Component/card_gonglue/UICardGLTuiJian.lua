---
    --- Generated by EmmyLua(https://github.com/EmmyLua)
    --- Created by LJ095.
    --- DateTime: 2019/5/6 10:34
    ---

local UICardGLTuiJian=BaseClass("UICardGLTuiJian", UIBaseContainer);
local UICardItem = require "UI.UICardList.Component.card_gonglue.UICardItem"
local base = UIBaseContainer;

local skill_nowText_path = "skillbg/base/base_Scroll/now_text";

local StaticCardRecommendData = DataUtil.GetData("card_recommend");
local StaticCardData = DataUtil.GetData("card")

local function SwitchPage(self, index)
    self.nowIndex = index;
    for i = 1, 3 do
        if i == index then
            self.btnGroup[i].img:SetSpriteName("ui_t_c2_001")
            self.btnGroup[i].text:SetColor32(21,24,30,255)
        else
            self.btnGroup[i].img:SetSpriteName("ui_t_c2_002")
            self.btnGroup[i].text:SetColor32(52,52,52,255)
        end
    end
    local recommendData = StaticCardRecommendData[StaticCardData[self.parent.cardId].RecommendTeam[index]];
    self.now_text:SetText(recommendData.Desc);
    local num = #recommendData.Card;
    for i = 1, 6 do
        if i <= num then
            self.cardItemGroup[i].gameObject:SetActive(true);
            self.cardItemGroup[i]:Refresh(recommendData.Card[i])
        else
            self.cardItemGroup[i].gameObject:SetActive(false);
        end
    end
end

local function OnCreate(self,_holderSelf)
    base.OnCreate(self);
    self.nowIndex = 1
    self.parent=_holderSelf
    --定位关键词
    self.now_text=self:AddComponent(UIText,skill_nowText_path);

    self.btnGroup = {}
    for i = 1, 3 do
        table.insert(self.btnGroup, {
            btn = self:AddComponent(UIButton,"skillbg/btn" ..i),
            img = self:AddComponent(UIImage,"skillbg/btn" ..i,AtlasConfig.DynamicTex),
            text = self:AddComponent(UIText, "skillbg/btn" ..i.. "/btnSkillName" ..i)
        })
        self.btnGroup[i].btn:SetOnClick(function ()
            LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
            SwitchPage(self,i)
        end)
    end
    self.cardItemGroup = {}
    for i = 1, 6 do
        self.cardItemGroup[i] = UICardItem.New(self, "skillbg/group/TeamGroup/FromImg"..i);
        self.cardItemGroup[i]:OnCreate(self);
    end

    self:OnRefresh()

end

--刷新
local function OnRefresh(self)
    SwitchPage(self,self.nowIndex)
end


local function OnDestroy(self)
    base.OnDestroy(self)
end
local function OnDisable(self)

end
local function OnDestroy(self)
    --主界面DesTory 触发

end
UICardGLTuiJian.OnDestroy= OnDestroy
UICardGLTuiJian.OnDisable=OnDisable
UICardGLTuiJian.OnCreate=OnCreate;
UICardGLTuiJian.OnRefresh=OnRefresh;
UICardGLTuiJian.OnDestroy=OnDestroy;
return UICardGLTuiJian;