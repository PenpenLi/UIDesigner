---
    --- Generated by EmmyLua(https://github.com/EmmyLua)
    --- Created by xupeng.
    --- DateTime: 2019/7/10 10:34
    ---

local UICardGLAoYiJLR=BaseClass("UICardGLAoYiJLR", UIBaseContainer);
local skillWrapitem=require "UI.UICardList.Component.card_skill.UICardSkillWrap"
local base = UIBaseContainer;

local skill_name_path = "skillbg/SkillItem1/_name";
local skill_keyname_path = "skillbg/SkillItem1/_keyname";
local skill_nowText_path = "skillbg/base/base_Scroll/now_text";
local skill_nextText_path = "skillbg/next/next_Scroll/next_text";
local skill_btn1_path = "skillbg/btnSkill1";
local skill_btn2_path = "skillbg/btnSkill2";

local skill_data=DataUtil.GetData("skill")
local StaticCardData = DataUtil.GetData("card")
--切换技能
local function SwitchPage(self, index)
    self.nowIndex = index;
    if index == 1 then
        self.Btn1_img:SetSpriteName("ui_t_c2_001")
        self.Btn2_img:SetSpriteName("ui_t_c2_002")
        self.Btn1_text:SetColor32(21,24,30,255)
        self.Btn2_text:SetColor32(52,52,52,255)
    else
        self.Btn1_img:SetSpriteName("ui_t_c2_002")
        self.Btn2_img:SetSpriteName("ui_t_c2_001")
        self.Btn1_text:SetColor32(52,52,52,255)
        self.Btn2_text:SetColor32(21,24,30,255)
    end
    local skillID = StaticCardData[self.parent.cardId].Skill[index]
    local skillData = skill_data[StaticCardData[self.parent.cardId].Skill[index]]
    self.name_text:SetText(skillData.Name)
    local keyStr = "";
    for i = 1, #skillData.FeatureWords do
        keyStr = keyStr.."["..skillData.FeatureWords[i].."]"
    end
    self.keyname_text:SetText(keyStr);
    self.now_text:SetText(skillData.SkillSketchDes);
    self.next_text:SetText(skillData.SkillUsage);
    self.skillitem:OnRefresh(skillID,0,self.parent.cardId);
end

local function OnCreate(self,_holderSelf)
    base.OnCreate(self);
    self.nowIndex = 1;
    self.parent=_holderSelf
    --定位关键词
    self.name_text = self:AddComponent(UIText,skill_name_path);
    self.keyname_text = self:AddComponent(UIText,skill_keyname_path);
    self.now_text = self:AddComponent(UIText,skill_nowText_path);
    self.next_text = self:AddComponent(UIText,skill_nextText_path);
    self.Btn1_img = self:AddComponent(UIImage,"skillbg/btnSkill1",AtlasConfig.DynamicTex);
    self.Btn2_img = self:AddComponent(UIImage,"skillbg/btnSkill2",AtlasConfig.DynamicTex);
    self.Btn1_text = self:AddComponent(UIText,"skillbg/btnSkill1/btnSkillName1");
    self.Btn2_text = self:AddComponent(UIText,"skillbg/btnSkill2/btnSkillName2");

    self.skillitem = skillWrapitem.New(self,"skillbg/SkillItem1/SkillIcon");
    self.skillitem:OnCreate(self);

    self.skill1_btn = self:AddComponent(UIButton,skill_btn1_path);
    self.skill1_btn:SetOnClick(function ()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        SwitchPage(self,1)
    end)

    self.skill2_btn = self:AddComponent(UIButton,skill_btn2_path);
    self.skill2_btn:SetOnClick(function ()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        SwitchPage(self,2)
    end)

    self:OnRefresh()

end

--刷新
local function OnRefresh(self)
    SwitchPage(self,self.nowIndex);
end


local function OnDestroy(self)
    base.OnDestroy(self)
end
local function OnDisable(self)

end
local function OnDestroy(self)
    --主界面DesTory 触发

end
UICardGLAoYiJLR.OnDestroy= OnDestroy
UICardGLAoYiJLR.OnDisable=OnDisable
UICardGLAoYiJLR.OnCreate=OnCreate;
UICardGLAoYiJLR.OnRefresh=OnRefresh;
UICardGLAoYiJLR.OnDestroy=OnDestroy;
return UICardGLAoYiJLR;