---
    --- Generated by EmmyLua(https://github.com/EmmyLua)
    --- Created by LJ095.
    --- DateTime: 2019/5/6 10:34
    ---

local UICardGLSHLWlj=BaseClass("UICardGLSHLWlj", UIBaseContainer);
local UICardGLWljWrap= require("UI.UICardList.Component.card_gonglue.UICardGLWljWrap")
local base = UIBaseContainer;

local skill_nowText_path = "skillbg/base/base_Scroll/now_text";
local skill_btn1_path = "skillbg/btnSkill1";
local skill_btn2_path = "skillbg/btnSkill2";

local StaticCardData = DataUtil.GetData("card")
--切换技能
local function SwitchPage(self, index)
    self.nowIndex = index;
    if index == 1 then
        self.Btn1_img:SetSpriteName("ui_t_c2_001")
        self.Btn2_img:SetSpriteName("ui_t_c2_002")
        self.Btn1_text:SetColor32(21,24,30,255)
        self.Btn2_text:SetColor32(52,52,52,255)
    else
        self.Btn1_img:SetSpriteName("ui_t_c2_002")
        self.Btn2_img:SetSpriteName("ui_t_c2_001")
        self.Btn1_text:SetColor32(52,52,52,255)
        self.Btn2_text:SetColor32(21,24,30,255)
    end
    local skillGroup = StaticCardData[self.parent.cardId].RecommendSkill;
    for i = 1, 2 do
        self.skillIconGroup[i]:OnRefresh(skillGroup[index].skills[i],self.parent.cardId);
    end
    self.now_text:SetText(skillGroup[index].desc);
end

local function OnCreate(self,_holderSelf)
    base.OnCreate(self);
    self.nowIndex = 1
    self.parent=_holderSelf
    --定位关键词
    self.skillIconGroup={}
    for i = 1, 2 do
        self.skillIconGroup[i]=UICardGLWljWrap.New(self,"skillbg/SkillItem"..i)
        self.skillIconGroup[i]:OnCreate(self)
    end

    self.now_text = self:AddComponent(UIText,skill_nowText_path);

    self.Btn1_img = self:AddComponent(UIImage,"skillbg/btnSkill1",AtlasConfig.DynamicTex);
    self.Btn2_img = self:AddComponent(UIImage,"skillbg/btnSkill2",AtlasConfig.DynamicTex);
    self.Btn1_text = self:AddComponent(UIText,"skillbg/btnSkill1/btnSkillName1");
    self.Btn2_text = self:AddComponent(UIText,"skillbg/btnSkill2/btnSkillName2");

    self.skill1_btn = self:AddComponent(UIButton,skill_btn1_path);
    self.skill1_btn:SetOnClick(function ()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        SwitchPage(self,1)
    end)

    self.skill2_btn = self:AddComponent(UIButton,skill_btn2_path);
    self.skill2_btn:SetOnClick(function ()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        SwitchPage(self,2)
    end)

    self:OnRefresh()

end



--刷新
local function OnRefresh(self)
    SwitchPage(self,self.nowIndex);
end


local function OnDestroy(self)
    base.OnDestroy(self)
end
local function OnDisable(self)

end
local function OnDestroy(self)
    --主界面DesTory 触发

end
UICardGLSHLWlj.OnDestroy= OnDestroy
UICardGLSHLWlj.OnDisable=OnDisable
UICardGLSHLWlj.OnCreate=OnCreate;
UICardGLSHLWlj.OnRefresh=OnRefresh;
UICardGLSHLWlj.OnDestroy=OnDestroy;
return UICardGLSHLWlj;