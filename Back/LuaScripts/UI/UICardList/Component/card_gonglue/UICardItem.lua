---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/1/10 10:10
---

local UICardItem = BaseClass("UICardItem", UIBaseContainer);
local base = UIBaseContainer;

local StaticCardData = DataUtil.GetData("card")

local function OnCreate(self)
    base.OnCreate(self);
    self.icon=self:AddComponent(UIImage,"CardInfo/CardHead/IconImg",AtlasConfig.DynamicTex);
    self.qualityImg=self:AddComponent(UIImage,"CardInfo/CardHead/QualityImg",AtlasConfig.DynamicTex);
    self.lvText=self:AddComponent(UIText,"CardInfo/CardHead/LevelText");
    self.frame=self:AddComponent(UIImage,"CardInfo/CardHead",AtlasConfig.DynamicTex);
    self.crystalBg=self:AddComponent(UIImage,"CardInfo/CardHead/Crystal",AtlasConfig.DynamicTex);
    self.crystalIcon=self:AddComponent(UIText,"CardInfo/CardHead/Crystal/CrystalNum");
    self.starGroup=self:AddComponent(UIBaseContainer,"CardInfo/CardHead/Star");
    self.name=self:AddComponent(UIText,"NameText");
    self.starList={};
    local starCount=self.starGroup.transform.childCount;
    for i = 0, starCount-1 do
        local singleStarImg=self.starGroup:AddComponent(UIImage,i,AtlasConfig.DynamicTex);
        table.insert(self.starList,singleStarImg);
    end
end

--刷新
local function Refresh(self,cardID)
    local boxData = StaticCardData[cardID]
    self.name:SetText(boxData.Name);
    self.icon:SetSpriteName(boxData.Icon);
    --self.qualityImg:SetSpriteName(boxData.qualityImg);
    --self.isHaveObj.gameObject:SetActive(boxData.isHave==0);
    self.crystalBg:SetSpriteName(SpriteDefine:GetCrystalIconByType(boxData.CrystalType));
    self.crystalIcon:SetText(math.floor(boxData.CallCost));
    self.crystalBg.gameObject:SetActive(boxData.Type==2);
    self.lvText.gameObject:SetActive(false);
    self.starGroup.gameObject:SetActive(false);
    UIUtil.SetHeroStar(1,self.starList);
end
UICardItem.OnCreate=OnCreate;
UICardItem.Refresh=Refresh;
return UICardItem;