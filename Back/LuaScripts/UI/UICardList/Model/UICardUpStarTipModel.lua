---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/5/7 19:44
---

local UICardUpStarTipModel = BaseClass("UICardUpStarTipModel", UIBaseModel)
local base = UIBaseModel

local cardList=DataUtil.GetData("card")
local properList= DataUtil.GetData("property")
local function GetStarShareInfo(_StaticData,_starlv,_colorType)
    local StarDes=_starlv.."星:"
    if _StaticData.stars[_starlv].AttrTrans ~=nil then
        StarDes= StarDes.."将自身的"
        for i = 1, #_StaticData.stars[_starlv].AttrTrans do
            local properItem=properList[_StaticData.stars[_starlv].AttrTrans[i].id]
            if properItem then
                local Provalue =(_StaticData.stars[_starlv].AttrTrans[i].val*100).."%"
                StarDes=StarDes..properItem.CnName.."的"..Provalue.."."
            else
                Logger.Log("获得Card 寄灵人转化Bug".._StaticData.Name)
            end
        end
        StarDes = StarDes.."提供给所召唤的守护灵"
    else
        StarDes=StarDes.."无属性提供"
    end
    if _colorType==2 then
        StarDes="<color=#3F793F>"..StarDes.."</color>\n"
    elseif _colorType ==3 then
        StarDes="<color=#969696>"..StarDes.."</color>\n"
    else
        StarDes="<color=#15181E>"..StarDes.."</color>\n"
    end
    return StarDes
end

--获取升星界面提示信息
local function GetStarShareTipInfo(_showCardData,_staticCardData)
    local str="";
    local colorType=1;
    for i = 1, #_staticCardData.stars do
        if i<_showCardData.starlv then
            colorType=1;
        elseif i==_showCardData.starlv then
            colorType=2;
        else
            colorType=3;
        end
        str=str..GetStarShareInfo(_staticCardData,i,colorType)
    end
    return str;
end

local function OnCreate(self)
    base.OnCreate(self)
end

local function OnEnable(self,_cardId)
    base.OnEnable(self)
    local showCardData = CardData:GetInstance().cards[_cardId];
    local staticCardData =  cardList[_cardId];
    self.tipInfo=GetStarShareTipInfo(showCardData,staticCardData);
    self.cardName=staticCardData.Name;
end
UICardUpStarTipModel.OnCreate = OnCreate
UICardUpStarTipModel.OnEnable = OnEnable

return UICardUpStarTipModel