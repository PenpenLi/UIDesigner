---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by aaa.
--- DateTime: 2019/3/12 11:29
---

local EnemyBuffList = BaseClass("EnemyBuffList", UIBaseContainer)
local base = UIBaseContainer

local function OnCreate(self)
    base.OnCreate(self)
    self.buffs = {}
    for i = 1, 6 do
        self.buffs[i] = {}
        self.buffs[i].img = self:AddComponent(UIImage,tostring(i),AtlasConfig.DynamicTex);
        self.buffs[i].img.gameObject:SetActive(false)
    end

end

-- 组件被复用时回调该函数，执行组件的刷新
local function OnRefresh(self,data)
    if data~= nil then
        --首先检测图标有没有 没有不显示
        local skill_effect = DataUtil.GetData("skill_effect")
        local skill_effect_buff = DataUtil.GetData("skill_effect_buff")
        local result_icon = {}
        for i, v in ipairs(data) do
            if skill_effect[v.id] ~= nil then
                local id = skill_effect[v.id].DetailType
                if skill_effect_buff[id] ~= nil and skill_effect_buff[id].BuffIcon~= nil and #skill_effect_buff[id].BuffIcon>0 then
                    table.insert(result_icon,{icon = skill_effect_buff[id].BuffIcon})
                end
            end
        end
        for i = 1, 6 do
            if result_icon[i] ~= nil then
                self.buffs[i].img.gameObject:SetActive(true)
                self.buffs[i].img:SetSpriteName(result_icon[i].icon)
            else
                self.buffs[i].img.gameObject:SetActive(false)
            end
        end
    else
        for i = 1, 6 do
            self.buffs[i].img.gameObject:SetActive(false)
        end
    end
end


EnemyBuffList.OnRefresh = OnRefresh
EnemyBuffList.OnCreate = OnCreate
return EnemyBuffList