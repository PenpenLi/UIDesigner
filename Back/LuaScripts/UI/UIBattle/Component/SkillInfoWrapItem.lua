---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by aaa.
--- DateTime: 2019/1/9 14:00
---

local SkillInfoWrapItem = BaseClass("SkillInfoWrapItem", UIWrapComponent)
local base = UIWrapComponent


local function OnCreate(self)
    base.OnCreate(self)
    --组建初始化
    self.item_icon_img=self:AddComponent(UIImage,"SkillBg/Icon",AtlasConfig.DynamicTex)
    self.cost_text = self:AddComponent(UIText,"Num")
    self.name_text = self:AddComponent(UIText,"Name")
    self.des_text = self:AddComponent(UIText,"Content")
    self.crystal_img = self:AddComponent(UIImage,"CrystalType",AtlasConfig.DynamicTex)
end
local function GetCrystalImg(type)
    if type == 1 then
        return "ui_t_Card_028"
    elseif type == 2 then
        return "ui_t_Card_029"
    else
        return "ui_t_Card_027"
    end
end
-- 组件被复用时回调该函数，执行组件的刷新
local function OnRefresh(self,real_index)
    local temp_data =self.view.model.data.skill[real_index+1]
    local skill = DataUtil.GetData("skill")
    local data = skill[temp_data[1]]
    if data ~= nil then
        self.item_icon_img:SetSpriteName(data.Icon)
        self.cost_text:SetText(math.floor(temp_data[3]))
        self.name_text:SetText(data.Name)
        local skill_des = DataUtil.GetData("skill_description")
        local keys = GameDataBase.SheetBase.GetKeys(skill_des)
        self.des_text:SetText("暂无")
        for i = 1, #keys do
            if  skill_des[keys[i]].SkillID == temp_data[1] and skill_des[keys[i]].Level == temp_data[4] then
                self.des_text:SetText(skill_des[keys[i]].Description)
                break
            end
        end
        --self.crystal_img:SetSpriteName(GetCrystalImg(temp_data[2]))
    end
end

SkillInfoWrapItem.OnCreate = OnCreate
SkillInfoWrapItem.OnRefresh = OnRefresh

return SkillInfoWrapItem