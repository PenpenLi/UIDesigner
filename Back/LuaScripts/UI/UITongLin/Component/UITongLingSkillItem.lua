---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/2/22 10:47
local UITongLingSkillItem=BaseClass("UITongLingSkillItem",UIBaseContainer)
local base = UIWrapComponent
local skill_data=DataUtil.GetData("skill")
local function SkillBtnUp(self)
    self.view.long_tap_check = false
    self.view.cur_select_skill_time =0
end
local function SkillBtnDown(self)
    self.view.mouse_down_pos=CS.UnityEngine.Input.mousePosition.x
    self.view.skill_info= self.skill_data
    self.view.card_type= self.CryType
    self.view.cur_select_skill_time =0
    self.view.long_tap_check = true
end



local function OnCreate(self)
    base.OnCreate(self)
    --组建初始化
    self.skill_frame_img = self:AddComponent(UIImage, "SkillIcon/Skill_Bg",AtlasConfig.DynamicTex)

    self.skill_img = self:AddComponent(UIImage, "SkillIcon/Skill_Bg/Skill_Icon",AtlasConfig.DynamicTex)

    self.firetypeImg=self:AddComponent(UIImage, "SkillIcon/Skill_PassiveSkill",AtlasConfig.DynamicTex)

    self.CryObj= UIUtil.FindTrans(self.transform,"SkillIcon/Skill_Crystal")

    self.Cry_Img=self:AddComponent(UIImage, "SkillIcon/Skill_Crystal/Skill_Cost_Icon",AtlasConfig.DynamicTex)

    self.Cry_Num=self:AddComponent(UIText, "SkillIcon/Skill_Crystal/Skill_Cost_Num")

    self.skill_press = self:AddComponent(UIEventTrigger,"SkillIcon/Skill_Bg/Skill_Icon")
    --TODO  Press回头校验
    self.skill_press:SetOnPointerUp(self,SkillBtnUp)
    self.skill_press:SetOnPointerDown(self,SkillBtnDown)
    --self.skill_press:SetOnPointerExit(self,SkillBtnExit)
    end
local function SetSkillData(self,SkillID,CryType)
    self.CryType=CryType
    self.skill_data=skill_data[SkillID]
    self.skill_img:SetSpriteName( self.skill_data.Icon)
    if self.skill_data.ShowFireType==2 or self.skill_data.ShowFireType==3then
        self.firetypeImg.gameObject:SetActive(true)
        self.firetypeImg:SetSpriteName(SpriteDefine:GetSkillFireByFireType(self.skill_data.ShowFireType))
    else
        self.firetypeImg.gameObject:SetActive(false)
    end
    if  CryType and self.skill_data.CrystalCount>0 and self.skill_data.FireType~=2 then
        self.CryObj.gameObject:SetActive(true)

        self.Cry_Img:SetSpriteName(SpriteDefine:GetCrystalIconByType(CryType))

        self.Cry_Num:SetText(math.floor(self.skill_data.CrystalCount))
    else
        self.CryObj.gameObject:SetActive(false)
    end

end
local function OnRefresh(self,real_index)






end
UITongLingSkillItem.SetSkillData = SetSkillData
UITongLingSkillItem.OnCreate = OnCreate
UITongLingSkillItem.OnPressThisBtn=OnPressThisBtn
UITongLingSkillItem.OnRefresh=OnRefresh
return UITongLingSkillItem
