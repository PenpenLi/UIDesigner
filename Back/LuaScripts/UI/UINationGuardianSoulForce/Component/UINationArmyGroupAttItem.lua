---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ljl.
--- DateTime: 2019/4/29 11:40
---
local UINationArmyGroupAttItem = BaseClass("UINationArmyGroupAttItem", UIBaseContainer)
local base = UIBaseContainer
local OFFSET_Y = 13
local function OnCreate(self)
    base.OnCreate(self)
    self.backUIImage = self:AddComponent(UIImage, "")
    self.backUIImageTran = self.backUIImage.rectTransform
    self.contentUIText =self:AddComponent(UIText, "titleText_UIText")
    self.smallRing_UIImage =  self:AddComponent(UIImage,"smallRing_UIImage")
    self.grayMat=self.smallRing_UIImage:GetMat()
end

local function SetActive(self,isActive)
    self.transform.gameObject:SetActive(isActive)
end

local function Refresh(self,parent,formatStr,paramTable,isGrey)
    local contentStr = nil
    if paramTable == nil then
        contentStr = formatStr
    else
        local val
        if paramTable.ValueType == NationDefine.NATION_TECH_VALUE_TYPE.RATE then -- 百分比
            val = math.modf(paramTable.Value * 100) .."%"
        else
            val = paramTable.Value
        end
        contentStr = string.format(formatStr,val)
    end
    self.contentUIText:SetText(contentStr)
    local height = UIUtil.GetTextHeight(self.contentUIText.unity_uitext, contentStr) + OFFSET_Y
    if isGrey then
        self.smallRing_UIImage:SetMat(self.grayMat)
    else
        self.smallRing_UIImage:SetMat(nil)
    end
    self.backUIImageTran.sizeDelta=Vector2.New(self.backUIImageTran.sizeDelta.x,height)
end

UINationArmyGroupAttItem.OnCreate=OnCreate
UINationArmyGroupAttItem.Refresh=Refresh
UINationArmyGroupAttItem.SetActive=SetActive

return UINationArmyGroupAttItem