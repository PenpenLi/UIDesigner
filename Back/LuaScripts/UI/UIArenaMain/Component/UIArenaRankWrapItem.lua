---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ljl.
--- DateTime: 2019/1/14 13:54
---
local UIArenaRankWrapItem=BaseClass("UIArenaRankWrapItem",UIWrapComponent)
local base = UIWrapComponent

---点击头像
local function OnSkillItemClick(self)
    if self.skill_single_data==nil then
        return
    end
    self.view.SetLeftPanelData(self.view, self.transform,self.skill_single_data)
end

local function OnCreate(self)
    base.OnCreate(self)
    --组建初始化
    self.bg_img = UIUtil.FindTrans(self.transform,"bgImg")
    self.icon_img=self:AddComponent(UIImage,"playerIconImg",AtlasConfig.DynamicTex)
    self.frame_img = self:AddComponent(UIImage,"playerframImg",AtlasConfig.DynamicTex)
    self.score = self:AddComponent(UIText,"scoreText")
    self.name = self:AddComponent(UIText,"nameText")
    self.iconBtn = self:AddComponent(UIButton,"playerframImg")
    self.iconBtn:SetOnClick(function ()
        --UISpecial:GetInstance():UITipText(DataUtil.GetClientText(100045))
    end)
    self.rank_img = self:AddComponent(UIImage,"rankImg",AtlasConfig.DynamicTex)
    self.rank_text = self:AddComponent(UIText,"rank_text")
end

-- 组件被复用时回调该函数，执行组件的刷新
local function OnRefresh(self,real_index)
    self.single_data=self.view.rank_data[real_index+1]
    if self.single_data == nil then
        return
    end
    self.bg_img.gameObject:SetActive(real_index%2 == 0)
    self.icon_img:SetSpriteName(self.single_data.challenge_icon)
    self.frame_img:SetSpriteName(self.single_data.challenge_frame)
    self.name:SetText(self.single_data.challenge_name)
    self.score:SetText(math.floor(self.single_data.challenge_score))
    if self.single_data.rank_num == 1 then
        self.rank_img.gameObject:SetActive(true)
        self.rank_img:SetSpriteName("ui_t_Arena_021")
        self.rank_text.gameObject:SetActive(false)
    elseif self.single_data.rank_num == 2 then
        self.rank_img.gameObject:SetActive(true)
        self.rank_img:SetSpriteName("ui_t_Arena_022")
        self.rank_text.gameObject:SetActive(false)
    elseif self.single_data.rank_num == 3 then
        self.rank_img.gameObject:SetActive(true)
        self.rank_img:SetSpriteName("ui_t_Arena_023")
        self.rank_text.gameObject:SetActive(false)
    else
        self.rank_img.gameObject:SetActive(false)
        self.rank_text.gameObject:SetActive(true)
        self.rank_text:SetText(math.floor(self.single_data.rank_num))
    end
end

UIArenaRankWrapItem.OnCreate = OnCreate
UIArenaRankWrapItem.OnSkillItemClick = OnSkillItemClick
UIArenaRankWrapItem.OnRefresh=OnRefresh

return UIArenaRankWrapItem