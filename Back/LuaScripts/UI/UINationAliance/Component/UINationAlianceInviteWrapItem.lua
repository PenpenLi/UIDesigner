---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/4/26 11:02
---

local UINationAlianceInviteWrapItem = BaseClass("UINationAlianceInviteWrapItem", UIWrapComponent)
local base = UIWrapComponent

local name_path = "AlianceName";
local lv_path = "AlianceLv";
local member_path = "AlianceMemberNum";
local area_path = "AlianceArea";
local ligeance_path = "AlianceLigeance";
local shili_value_path = "AlianceShiLiValue";
local accept_btn_path = "AcceptBtn";
local refuse_btn_path = "RefuseBtn";

local function OnCreate(self)
    base.OnCreate(self)
    self.bgImg = self:AddComponent(UIImage, "bg");
    self.bgButton = self:AddComponent(UIButton, "");
    self.bgButton:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick");
        -- 打开联盟详情
        UIManager:GetInstance():OpenWindow(UIWindowNames.UINationAlianceDetail, self.singleData);
    end)
    self.nameText = self:AddComponent(UIText, name_path);
    self.lvText = self:AddComponent(UIText, lv_path);
    self.memberText = self:AddComponent(UIText, member_path);
    self.areaText = self:AddComponent(UIText, area_path);
    self.ligeanceText = self:AddComponent(UIText, ligeance_path);
    self.shiliValueText = self:AddComponent(UIText, shili_value_path);
    self.accept_text = self:AddComponent(UIText, "AcceptBtn/AccepText")
    self.refuse_text = self:AddComponent(UIText, "RefuseBtn/RefuseText")
    self.acceptBtn = self:AddComponent(UIButton, accept_btn_path);
    self.acceptBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick");
        self.view.ctrl:OnNationAlianceInviteItemDealBtnPressed(self.singleData, true)
    end)
    self.refuseBtn = self:AddComponent(UIButton, refuse_btn_path);
    self.refuseBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick");
        self.view.ctrl:OnNationAlianceInviteItemDealBtnPressed(self.singleData, false)
    end);
end

-- 组件被复用时回调该函数，执行组件的刷新
local function OnRefresh(self, real_index)
    self.bgImg:SetEnabled((real_index + 1) % 2 == 0);
    local singleData = self.view.model.invitAlianceList[real_index + 1]
    self.singleData = singleData
    self.nameText:SetText(singleData.name);
    self.lvText:SetText(singleData.level);
    self.memberText:SetText(string.format("%s/%s", singleData.members, singleData.currentNationalUnionLevelData.Member));
    self.areaText:SetText(singleData.citys);
    self.shiliValueText:SetText(singleData.force);

    self.accept_text:SetText(DataUtil.GetClientText(200098))
    self.refuse_text:SetText(DataUtil.GetClientText(200099))
end

UINationAlianceInviteWrapItem.OnCreate = OnCreate
UINationAlianceInviteWrapItem.OnRefresh = OnRefresh
return UINationAlianceInviteWrapItem