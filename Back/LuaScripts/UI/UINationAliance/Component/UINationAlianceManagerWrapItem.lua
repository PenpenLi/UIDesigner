---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/4/27 11:54
---
local UINationAlianceManagerWrapItem = BaseClass("UINationAlianceManagerWrapItem", UIWrapComponent)
local base = UIWrapComponent

local function OnCreate(self)
    base.OnCreate(self)
    self.bgImg = self:AddComponent(UIImage, "")
    self.memberTitle_UIText = self:AddComponent(UIText, "memberName_UIText")
    self.regionName_UIText = self:AddComponent(UIText, "regionName_UIText")
    self.force_UIText = self:AddComponent(UIText, "force_UIText")
    self.headIcon_UIImage = self:AddComponent(UIImage, "frame_UIImage/headIcon_UIImage", AtlasConfig.DynamicTex)
    self.frame_UIImage = self:AddComponent(UIImage, "frame_UIImage", AtlasConfig.DynamicTex)

    --申请组
    self.applyGroupObj = UIUtil.FindTrans(self.transform, "applyGroup").gameObject
    self.AgreeBtn_UIButton = self:AddComponent(UIButton, "applyGroup/AgreeBtn_UIButton")
    self.AgreeBtn_UIButton:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        self.view.ctrl:OnMannagerSubTabApplyItemDealArgreeBtnPressed(self.itemData, true)
    end)
    self.AgreeText_UIText = self:AddComponent(UIText, "applyGroup/AgreeBtn_UIButton/AgreeText_UIText")
    self.AgreeText_UIText:SetText(DataUtil.GetClientText(200280))
    self.RefuseBtn_UIButton = self:AddComponent(UIButton, "applyGroup/RefuseBtn_UIButton")
    self.RefuseBtn_UIButton:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        self.view.ctrl:OnMannagerSubTabApplyItemDealArgreeBtnPressed(self.itemData, false)
    end)
    self.RefuseText_UIText = self:AddComponent(UIText, "applyGroup/RefuseBtn_UIButton/RefuseText_UIText")
    self.RefuseText_UIText:SetText(DataUtil.GetClientText(200099))

    self.applyAgreeStatusObj = UIUtil.FindTrans(self.transform, "applyGroup/applyAgreeStatus").gameObject
    self.applyAgreeStatus_UIText = self:AddComponent(UIText, "applyGroup/applyAgreeStatus/applyAgreeStatus_UIText")
    self.applyAgreeStatus_UIText:SetText(DataUtil.GetClientText(200281))
    self.applyRefuseStatusObj = UIUtil.FindTrans(self.transform, "applyGroup/applyRefuseStatus").gameObject
    self.applyRefuseStatus_UIText = self:AddComponent(UIText, "applyGroup/applyRefuseStatus/applyRefuseStatus_UIText")
    self.applyRefuseStatus_UIText:SetText(DataUtil.GetClientText(200282))

    --邀请组
    self.inviteGroupObj = UIUtil.FindTrans(self.transform, "inviteGroup").gameObject
    self.inviteBtn = self:AddComponent(UIButton, "inviteGroup/inviteBtn")
    self.inviteBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        self.view.ctrl:OnMannagerSubTabInviteItemDealBtnPressed(self.itemData)
    end)
    self.inviteText_UIText = self:AddComponent(UIText, "inviteGroup/inviteBtn/inviteText_UIText")
    self.inviteText_UIText:SetText(DataUtil.GetClientText(200271))
    self.inviteStatusObj = UIUtil.FindTrans(self.transform, "inviteGroup/inviteStatus").gameObject
    self.inviteStatus_UIText = self:AddComponent(UIText, "inviteGroup/inviteStatus/inviteStatus_UIText")
    self.inviteStatus_UIText:SetText(DataUtil.GetClientText(200283))
end

-- 组件被复用时回调该函数，执行组件的刷新
local function OnRefresh(self, real_index)
    self.bgImg:SetEnabled((real_index + 1) % 2 == 0)
    local model = self.view.model
    local itemData = model.managerDataMemberList[real_index + 1]
    self.itemData = itemData
    self.memberTitle_UIText:SetText(itemData.name)
    if itemData.regionData ~= nil then
        self.regionName_UIText:SetText(itemData.regionData.Name)
    else
        self.regionName_UIText:SetText("")
    end
    self.force_UIText:SetText(itemData.force)
    self.headIcon_UIImage:SetSpriteName(itemData.headIcon)
    self.frame_UIImage:SetSpriteName(itemData.headFrame)

    if model.subFuncIndex == model.SUB_MANAGER_TAB_FUNC_INDEX.APPLY_MANAGE then
        self.applyGroupObj:SetActive(true)
        self.inviteGroupObj:SetActive(false)
        if itemData.agreeStatus == model.SUB_MANAGER_TAB_APPLY_MANAGE_AGREE_STATUS.NO_ACCPET then
            self.AgreeBtn_UIButton.gameObject:SetActive(true)
            self.RefuseBtn_UIButton.gameObject:SetActive(true)
            self.applyAgreeStatusObj:SetActive(false)
            self.applyRefuseStatusObj:SetActive(false)
        elseif itemData.agreeStatus == model.SUB_MANAGER_TAB_APPLY_MANAGE_AGREE_STATUS.AGREE then
            self.AgreeBtn_UIButton.gameObject:SetActive(false)
            self.RefuseBtn_UIButton.gameObject:SetActive(false)
            self.applyAgreeStatusObj:SetActive(true)
            self.applyRefuseStatusObj:SetActive(false)
        else
            self.AgreeBtn_UIButton.gameObject:SetActive(false)
            self.RefuseBtn_UIButton.gameObject:SetActive(false)
            self.applyAgreeStatusObj:SetActive(false)
            self.applyRefuseStatusObj:SetActive(true)
        end
    else
        self.applyGroupObj:SetActive(false)
        self.inviteGroupObj:SetActive(true)
        if itemData.inviteStatus == model.SUB_MANAGER_TAB_APPLY_MANAGE_AGREE_STATUS.AGREE then
            self.inviteBtn.gameObject:SetActive(false)
            self.inviteStatusObj:SetActive(true)
        else
            self.inviteBtn.gameObject:SetActive(true)
            self.inviteStatusObj:SetActive(false)
        end
    end
end

UINationAlianceManagerWrapItem.OnCreate = OnCreate
UINationAlianceManagerWrapItem.OnRefresh = OnRefresh
return UINationAlianceManagerWrapItem