---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/6/14 15:56
---

local UICommonCostTipView = BaseClass("UICommonCostTipView", UIBaseView)
local base = UIBaseView


local title_name_path="ParentLayout/titleTxt";
local close_btn_path="ParentLayout/exitBtn";
local certain_btn_path="ParentLayout/certainBtn";
local cancel_btn_path="ParentLayout/cancelBtn";
local icon_img_path="ParentLayout/costIcon";
local tip_text_path="ParentLayout/infoText";
local tip_toggle_path="ParentLayout/tipToggle";

--关闭toggle点击
local function OnTipToggleValueChange(self,boo)
    if self.model.tipTogglecallback~=nil then
        self.model.tipTogglecallback(boo);
    end
end


local function OnCreate(self)
    base.OnCreate(self)
    self.titleName=self:AddComponent(UIText,title_name_path);
    self.maskBtn = self:AddComponent(UIButton, "mask");
    self.maskBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_Cancel")
        UIManager:GetInstance():CloseWindow(UIWindowNames.UICommonCostTip);
        if self.model.closeCallback~=nil then
            self.model.closeCallback();
        end
    end);
    self.closeBtn=self:AddComponent(UIButton,close_btn_path);
    self.closeBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_Cancel")
        UIManager:GetInstance():CloseWindow(UIWindowNames.UICommonCostTip);
        if self.model.closeCallback~=nil then
            self.model.closeCallback();
        end
    end);
    self.certainBtn=self:AddComponent(UIButton,certain_btn_path);
    self.certainBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_CommonClick")
        UIManager:GetInstance():CloseWindow(UIWindowNames.UICommonCostTip);
        if self.model.certainCallback~=nil then
            self.model.certainCallback();
        end
    end)
    self.cancelBtn=self:AddComponent(UIButton,cancel_btn_path);
    self.cancelBtn:SetOnClick(function()
        LJAudioManger:GetInstance():PlayVoice("UI_Cancel")
        UIManager:GetInstance():CloseWindow(UIWindowNames.UICommonCostTip);
        if self.model.closeCallback~=nil then
            self.model.closeCallback();
        end
    end)
    self.iconImg=self:AddComponent(UIImage,icon_img_path,AtlasConfig.DynamicTex);
    self.tipText=self:AddComponent(UIText,tip_text_path);
    self.tipToggle=UIUtil.FindComponent(self.transform,typeof(CS.UnityEngine.UI.Toggle),tip_toggle_path);
    self.tipToggle.onValueChanged:AddListener(BindCallback(self,OnTipToggleValueChange));
end

local function OnEnable(self)
    base.OnEnable(self);
    self.tipToggle.isOn=false;
    self.tipText:SetText(self.model.tipInfo);
    self.iconImg:SetSpriteName(self.model.itemIcon);
end

UICommonCostTipView.OnCreate = OnCreate;
UICommonCostTipView.OnEnable=OnEnable;
return UICommonCostTipView;

