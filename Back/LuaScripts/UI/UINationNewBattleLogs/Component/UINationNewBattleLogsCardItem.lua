---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/10/14 16:59


local UINationNewBattleLogsCardItem = BaseClass("UINationNewBattleLogsCardItem", UIBaseContainer)
local base = UIBaseContainer

-- 创建
local function OnCreate(self)
    base.OnCreate(self)
    self.model=self.view.model
    -- 组件初始化
    --self.cardRectTrans = UIUtil.FindComponent(self.transform, typeof(CS.UnityEngine.RectTransform), "Card".. i)
   -- self.CardObj = UIUtil.FindTrans(self.transform, "Card".. i).gameObject

    self.carddiBg1UIImage = self:AddComponent(UIImage,"CarddiBg1_UIImage", AtlasConfig.DynamicTex)--底板
    self.cardtopBg1UIImage = self:AddComponent(UIImage, "CardtopBg1_UIImage", AtlasConfig.DynamicTex)--边框
    self.qualityImg = self:AddComponent(UIImage, "CardQualityImg1_UIImage", AtlasConfig.DynamicTex)--品质
    -- self.lvText = self:AddComponent(UIText, "Card".. i .."/Level")
    self.iconImg=self:AddComponent(UIImage, "CardIcon1_UIImage", AtlasConfig.DynamicTex)
    self.shlCrystalImg = self:AddComponent(UIImage, "CardSHLCrystal1_UIImage", AtlasConfig.DynamicTex)
    self.jlrCrystalImg = self:AddComponent(UIImage, "CardJLRCrystal_UIImage", AtlasConfig.DynamicTex)
    self.costSoulImg=self:AddComponent(UIImage, "CardSHLCrystal1_UIImage/costSoulImg_UIImage", AtlasConfig.DynamicTex)
    self.starGroup = self:AddComponent(UIBaseContainer, "CardstarGroup1")
    self.starList = {}
    local starCount = self.starGroup.transform.childCount
    for i = 0, starCount - 1 do
        local singleStarImg = self.starGroup:AddComponent(UIImage, i, AtlasConfig.DynamicTex)
        table.insert(self.starList, singleStarImg)
    end

end

-- 组件被复用时回调该函数，执行组件的刷新
local function FlushCardContent(self,data)
    self.iconImg:SetSpriteName(data.icon)

    self.carddiBg1UIImage:SetSpriteName(SpriteDefine:GetCardBGByQua(data.quality))
    self.qualityImg:SetSpriteName(SpriteDefine:GetQuaIconByType(data.quality))
    self.cardtopBg1UIImage:SetSpriteName(SpriteDefine:GetCardTopFrameByQuality(data.quality))

    --self.cardShowBG:SetSpriteName(SpriteDefine:GetCardBGByQua(cardData.Quality));
    --self.cardShowFrame:SetSpriteName(SpriteDefine:GetCardPoorByIDQuality(cardData.Quality));
    --self.cardShowQualityImg:SetSpriteName(SpriteDefine:GetQuaIconByType(cardData.Quality));
    --self.qualityImg:SetSpriteName(SpriteDefine:GetQuaIconByType (data.quality))
    UIUtil.SetHeroStar(data.star, self.starList)
    if data.cardMainType==1 then--守护灵
        self.shlCrystalImg.gameObject:SetActive(false)
        self.jlrCrystalImg.gameObject:SetActive(true)
        self.jlrCrystalImg:SetSpriteName(data.hunImg)
    else
        self.shlCrystalImg.gameObject:SetActive(true)
        self.jlrCrystalImg.gameObject:SetActive(false)
        self.shlCrystalImg:SetSpriteName(data.hunImg)
        self.costSoulImg:SetSpriteName(data.hunTextImg)
    end
end


UINationNewBattleLogsCardItem.OnCreate=OnCreate
UINationNewBattleLogsCardItem.FlushCardContent=FlushCardContent




return UINationNewBattleLogsCardItem