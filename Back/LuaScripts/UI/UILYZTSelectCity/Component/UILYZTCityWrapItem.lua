---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/10/17 15:40
---

local UILYZTCityWrapItem = BaseClass("UILYZTCityWrapItem", UIWrapComponent)
local base = UIWrapComponent

local name_text_path="Text";

--设置选中
local function SetSelectImg(self)
    self.view.selectImg.transform.gameObject:SetActive(true);
    self.view.selectImg.transform:SetParent(self.transform);
    self.view.selectImg.transform.localScale=Vector2.one;
    self.view.selectImg.transform.localPosition=Vector2.zero;
    self.view.selectImg.transform:SetAsFirstSibling();
end

local function OnCreate(self)
    base.OnCreate(self)
    self.nameText=self:AddComponent(UIText,name_text_path);
    self.selfBtn=self:AddComponent(UIButton,"");
    self.selfBtn:SetOnClick(function()
        self.view.selectIndex=self.realIndex;
        SetSelectImg(self)
    end)
end

local function OnRefresh(self, real_index)
    self.realIndex=real_index+1;
    if self.realIndex==self.view.selectIndex then
        SetSelectImg(self);
    else
        if UIUtil.FindTrans(self.transform,"selectBg") then
            self.view.selectImg.transform.gameObject:SetActive(false);
        end
    end
    self.nameText:SetText(self.view.model.cityList[self.realIndex].name);
end

UILYZTCityWrapItem.OnCreate = OnCreate
UILYZTCityWrapItem.OnRefresh = OnRefresh
return UILYZTCityWrapItem