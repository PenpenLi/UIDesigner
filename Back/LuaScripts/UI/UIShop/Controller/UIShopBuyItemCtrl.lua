---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/2/20 16:43
---
local UIShopBuyItemCtrl = BaseClass("UIShopBuyItemCtrl", UIBaseCtrl)
--发送购买物品请求
local function SendBuyItemRequest(self,goodsId,buyNum)
    ShopData:GetInstance():BuyItemById(goodsId,buyNum,function(rewards)
        UIManager:GetInstance():CloseWindow(UIWindowNames.UIShopBuyItem)
        DataUtil.ParseDropItem(rewards)
        UIManager:GetInstance():OpenWindow(UIWindowNames.UICommGetRewards, rewards)
        if goodsId==1101 or goodsId==1102 then
            DataManager:GetInstance():Broadcast(DataMessageNames.ON_CARD_COST_ITEM_UPDATE)
            local itemXlsx =  DataUtil.GetData("shop_goods");
            --if itemXlsx[goodsId]~=nil then
            --    SdkManager:GetInstance().DataReport:PurchaseTrace({[1]=string.format("%s#%s",itemXlsx[goodsId].Name,goodsId),[2]=buyNum,[3]=0});
            --end

        end
    end);
end

UIShopBuyItemCtrl.SendBuyItemRequest=SendBuyItemRequest;

return UIShopBuyItemCtrl;