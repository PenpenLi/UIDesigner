---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ljl.
--- DateTime: 2019/6/10 11:26
---
local ArtifactPropertyItem = BaseClass("ArtifactPropertyItem", UIBaseContainer)
local base = UIBaseContainer

local proData=DataUtil.GetData("property")
local function OnPropertyCreate(self)
    base.OnCreate(self)
    self.selfObj = UIUtil.FindTrans(self.transform,"")

    self.selfBtn=self:AddComponent(UIButton,"ArtifactProperty_maskBtn")
    self.selfBtn:SetOnClick(function ()
        self.selfObj.gameObject:SetActive(false)
    end)
    self.talentEffectLayout = self:AddComponent(UIBaseContainer,"parent_Artifact/ArtifactPropertyScrollRect/ArtifactPropertyGrid")
    self.talentEffectList={}
    local count=self.talentEffectLayout.transform.childCount;
    for i = 0, count-1 do
        local tempItem=self.talentEffectLayout:AddComponent(UIBaseContainer,i)
        local tempName=tempItem:AddComponent(UIText,"Text")
        local tempStateImg=tempItem:AddComponent(UIImage,"")
        local bg = tempItem:AddComponent(UIImage,"bg")
        table.insert(self.talentEffectList,{talentName=tempName,stateImg=tempStateImg,bg = bg})
    end
end

--刷新
local function OnPropertyRefresh(self,bodyData)
    if bodyData == nil then
        return
    end
    for i, v in ipairs(self.talentEffectList) do
        if bodyData[i]~=nil then
            v.stateImg.gameObject:SetActive(true)
            local value
            if proData[bodyData[i].id].Show_Fac==100 then
                value= math.floor(bodyData[i].num*100).."%"
            else
                value=bodyData[i].num
            end
            v.talentName:SetText( bodyData[i].name.."  + "..value)
            v.bg.gameObject:SetActive(i %2 ~= 0)
        else
            v.stateImg.gameObject:SetActive(false)
        end
    end

end
ArtifactPropertyItem.OnPropertyCreate=OnPropertyCreate
ArtifactPropertyItem.OnPropertyRefresh=OnPropertyRefresh
return ArtifactPropertyItem