---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by LJ095.
--- DateTime: 2019/2/28 17:04
---

local UIHeadMainModel = BaseClass("UIHeadMainModel", UIBaseModel);
local base = UIBaseModel;
local itemList = DataUtil.GetData("item")

local function OnCreate(self)
    base.OnCreate(self)
--[[    self.headList={};
    self.headFrameList={};
    self.headFrameList[1]="ui_dtex_Quality_082";
    self.headFrameList[2]="ui_dtex_Quality_082";
    self.headFrameList[3]="ui_dtex_Quality_082";
    self.headFrameList[4]="ui_dtex_Quality_082";

    self.headList[1]="ui_dtex_Elingruqin_001";
    self.headList[2]="ui_dtex_Elingruqin_001";
    self.headList[3]="ui_dtex_Elingruqin_001";]]
    self.headList={}
end

local function OnEnable(self,_data)
    self.headList={}
    for i, v in pairs(itemList) do
        if v.ItemType == 30 then
            local itemData = {}
            itemData.id = i
            itemData.icon = v.Icon
            itemData.quality = v.Quality
            itemData.name = v.Name
            itemData.des = v.Des
            itemData.shortDes = v.ShortDes
            for _, m in ipairs(_data) do
                if itemData.id == m.id then
                    itemData.state = 1
                    break
                else
                    itemData.state = 0
                end
            end
            if UserData:GetInstance().pHead == i then
                itemData.lock = 1
            else
                itemData.lock = 0
            end
            table.insert(self.headList,itemData)
        end
    end
    table.sort(self.headList,function(a,b)
        if a.lock==b.lock then
            if a.state==b.state then
                if a.quality==b.quality then
                    return a.id>b.id
                else
                    return a.quality>b.quality
                end
            else
                return a.state>b.state
            end
        else
            return a.lock>b.lock
        end
    end)
    local itemData = {}
    itemData.id = UserData:GetInstance().pHead
    itemData.state = 1
    itemData.icon = itemList[UserData:GetInstance().pHead].Icon
    itemData.quality =  itemList[UserData:GetInstance().pHead].Quality
    itemData.name = itemList[UserData:GetInstance().pHead].Name
    itemData.des = itemList[UserData:GetInstance().pHead].Des
    itemData.shortDes =  itemList[UserData:GetInstance().pHead].ShortDes
    self.itemData = itemData
end

UIHeadMainModel.OnCreate=OnCreate;
UIHeadMainModel.OnEnable=OnEnable;
return UIHeadMainModel
